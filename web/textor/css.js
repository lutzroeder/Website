var Textor;!function(t){var e=function(){function t(){this._textReader=null,this._token=null}return t.prototype.begin=function(t,e){this._textReader=t,this._tokenStack=[{type:this.readStylesheet,selector:0,bracket:0,literal:!1,keyword:!1,start:!0}],this._token=null},t.prototype.read=function(){return this._state=null,this._token=this._tokenStack[this._tokenStack.length-1],{style:this._token.type.apply(this),state:this._state}},t.prototype.readStylesheet=function(){if(this._textReader.skipWhitespaces()||this._textReader.skipLineTerminators())return"text";if(this._token.start&&1===this._tokenStack.length&&(this._state="base",this._token.start=!1),this._textReader.match("{"))return this._token.start=!0,this._token.keyword?this.push({type:this.readStylesheet,selector:0,bracket:0,literal:!1,keyword:!1}):this.push({type:this.readBlock}),this._token.keyword=!1,"punctuation";if(this._textReader.match("}"))return this._tokenStack.length>1?(this.pop(),"punctuation"):(this._state=null,"error");if(this._textReader.match("["))return this._token.selector++,this._token.literal=!1,"punctuation";if(this._textReader.match("("))return this._token.bracket++,"punctuation";if(this._textReader.match("]"))return this._token.literal=!1,this._token.selector>0?(this._token.selector--,"punctuation"):"error";if(this._textReader.match(")"))return this._token.bracket>0?(this._token.bracket--,"punctuation"):"error";if(this._textReader.match("="))return this._token.literal=!0,"punctuation";if(this._textReader.match(";"))return this._token.keyword=!1,"punctuation";if(this._textReader.match(":")||this._textReader.match("#")||this._textReader.match(".")||this._textReader.match(",")||this._textReader.match("+")||this._textReader.match("*")||this._textReader.match("|")||this._textReader.match(">"))return"punctuation";if(this.matchComment())return"comment";if(this._textReader.match("@"))return this._token.keyword=!0,this.readWord(),"keyword";if(this.matchString())return"literal";var t=this.readWord();return t.length>0?this._token.bracket>0||this._token.selector>0&&this._token.literal?"literal":this._token.selector>0?"attribute":"element":(this._textReader.read(),"text")},t.prototype.readBlock=function(){if(this._textReader.skipWhitespaces()||this._textReader.skipLineTerminators())return"text";if(this._textReader.match("}"))return this.pop(),"punctuation";if(this.matchComment())return"comment";if(this._textReader.match(";"))return"punctuation";if(this._textReader.match(":"))return this.push({type:this.readExpression}),"punctuation";var t=this.readWord();return t.length>0?"attribute":(this._textReader.read(),"text")},t.prototype.readExpression=function(){return this._textReader.match(";")?(this.pop(),"punctuation"):this._textReader.match(",")?(this.pop(),this.push({type:this.readExpression}),"punctuation"):this._textReader.match("}")?(this.pop(),this.pop(),"punctuation"):this._textReader.match("(")||this._textReader.match(")")?"punctuation":this.matchComment()?"comment":this.matchString()?"literal":this._textReader.skipWhitespaces()?"text":this._textReader.match("url")?"text":(this._textReader.read(),"literal")},t.prototype.readComment=function(){return this.terminate("*/"),"comment"},t.prototype.readString=function(){return this._textReader.match("\\")?this._textReader.read():this.terminate(this._token.quote),"literal"},t.prototype.readXmlComment=function(){return this.terminate(">"),"comment"},t.prototype.matchComment=function(){return this._textReader.match("/*")?(this.push({type:this.readComment}),!0):!!this._textReader.match("<!")&&(this.push({type:this.readXmlComment}),!0)},t.prototype.matchString=function(){var t=this._textReader.peek();return("'"===t||'"'===t)&&(this._textReader.read(),this.push({type:this.readString,quote:t}),!0)},t.prototype.readWord=function(){for(var t,e="";(t=this._textReader.peek()).length>0&&/[\w\-\#$_]/.test(t);)e+=t,this._textReader.read();return e},t.prototype.terminate=function(t){return this._textReader.match(t)?(this.pop(),!0):(this._textReader.read(),!1)},t.prototype.push=function(t){this._tokenStack.push(t)},t.prototype.pop=function(){this._tokenStack.pop()},t}();t.CssLanguage=e}(Textor||(Textor={}));
//# sourceMappingURL=css.js.map

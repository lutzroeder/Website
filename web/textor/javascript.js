var Textor;!function(t){var e=function(){function t(){this._regExpCommands={g:!0,i:!0,m:!0},this._blockStatements={if:!0,while:!0,with:!0,for:!0,else:!0,do:!0,try:!0,catch:!0,finally:!0,switch:!0,case:!0,default:!0},this._expressionStatements={return:!0,delete:!0,throw:!0},this._terminalStatements={break:!0,continue:!0},this._literals={true:!0,false:!0,null:!0,undefinded:!0,NaN:!0,Infinity:!0},this._operators={in:!0,typeof:!0,instanceof:!0,new:!0},this._locals={this:!0,arguments:!0}}return t.prototype.begin=function(t,e){this._textReader=t,this._tokenStack=[{type:this.readBlockStatement,state:"root"}],this._token=null},t.prototype.read=function(){this._state=null,this._token=this._tokenStack[this._tokenStack.length-1];var t=this._token.type.apply(this);return 0===this._textReader.peek().length&&(this.popToken(this.readExpression),this.popToken(this.readVariable),this.popToken(this.readStatement)),{style:t,state:this._state}},t.prototype.readLineComment=function(){return this.terminate("\n"),"comment"},t.prototype.readBlockComment=function(){return this.terminate("*/"),"comment"},t.prototype.readStatement=function(){if("}"===this._textReader.peek())return this.pop(),null;if(this._textReader.match(";")||this._textReader.match(","))return this.pop(),"punctuation";if(this._textReader.match("{"))return this.push({type:this.readBlockStatement,state:""}),"punctuation";if(this._textReader.skipLineTerminators())return"text";this._token.start&&this._tokenStack.length<=2&&(this._state="base",this._token.start=!1);var t=this.readExpression();return 0===this._textReader.peek().length&&this.pop(),t},t.prototype.readExpression=function(){var t=this._textReader.peek();if(")"===t||"}"===t||"]"===t)return this.pop(),null;if(","===t||";"===t)return this.pop(),null;if(this._textReader.skipLineTerminators())return"text";if(this._textReader.skipWhitespaces())return"text";if(this.matchComment())return"comment";if(this.matchLiteral()||this.matchRegExp())return this._token.continuation=!1,this._token.regexp=!1,"literal";if(this.matchBlockExpression())return this._token.continuation=!1,this._token.regexp=!1,"punctuation";if(this._textReader.match("++")||this._textReader.match("--"))return this._token.regexp=!1,"punctuation";if(/[+\-*^&%<>!|]/.test(t))return this._token.continuation=!0,this._token.regexp=!0,this._textReader.read(),"punctuation";if("?"===t||"="===t)return this._textReader.read(),this._token.regexp=!0,this._token.continuation=!0,this.push({type:this.readExpression,continuation:!0,regexp:!0}),"punctuation";if(":"===t)return this._textReader.read(),this._token.regexp=!0,this._token.continuation=!0,"punctuation";if("."===t||"/"===t)return this._textReader.read(),this._token.continuation=!0,"punctuation";if(!this._token.continuation)return this.pop(),null;var e=this.readWord();if("function"===e)return this._token.continuation=!1,this.push({type:this.readFunction,name:"",state:"name"}),"keyword";if("var"===e||"const"===e)return this.push({type:this.readVariable,state:"none"}),"keyword";if(this._token.type===this.readStatement){if(this._blockStatements.hasOwnProperty(e)||this._terminalStatements.hasOwnProperty(e))return"keyword";if(this._expressionStatements.hasOwnProperty(e))return this.push({type:this.readExpression,continuation:!0,regexp:!0}),"keyword"}return this._locals.hasOwnProperty(e)||this._operators.hasOwnProperty(e)?(this._token.regexp=!1,"keyword"):this._literals.hasOwnProperty(e)?"literal":e.length>0?(this._token.continuation=!1,this._token.regexp=!1,"text"):(this._textReader.read(),"error")},t.prototype.readBlockStatement=function(){return this._textReader.match("}")?this._token.type===this.readBlockStatement&&"root"!==this._token.state?(this.pop(),"punctuation"):"error":this.matchComment()?"comment":this._textReader.match("]")||this._textReader.match(")")?"error":(this.push({type:this.readStatement,continuation:!0,regexp:!0,start:!0}),null)},t.prototype.readBlockExpression=function(){return this._textReader.match(",")||this._textReader.match(";")?"punctuation":this.matchComment()?"comment":(this.push({type:this.readExpression,continuation:!0,regexp:!0}),null)},t.prototype.readArray=function(){return this._textReader.match("]")?(this.pop(),"punctuation"):this._textReader.match("}")||this._textReader.match(")")?"error":this.readBlockExpression()},t.prototype.readArguments=function(){return this._textReader.match(")")?(this.pop(),"punctuation"):this._textReader.match("]")||this._textReader.match("}")?"error":this.readBlockExpression()},t.prototype.readObject=function(){if(this._textReader.match("}"))return this.pop(),"punctuation";if(this._textReader.match("]")||this._textReader.match(")"))return"error";if(this._textReader.skipWhitespaces()||this._textReader.skipLineTerminators())return"text";if(this._textReader.match(","))return this._token.identifier=!0,"punctuation";if(this._token.identifier){this._textReader.save();var t=this.readWord();if(t.length>0&&(this._textReader.skipWhitespaces(),":"===this._textReader.peek()))return this._textReader.restore(),this.readWord(),"declaration";this._textReader.restore()}return this._token.identifier=!1,this.readBlockExpression()},t.prototype.readFunction=function(){if("block"==this._token.state)return this.pop(),null;if(this._textReader.skipWhitespaces()||this._textReader.skipLineTerminators())return"text";if("name"==this._token.state){var t=this._textReader.peek();return/[\w\$_]/.test(t)?(this._token.name+=this._textReader.read(),"declaration"):(this._token.state="next",null)}return this._textReader.match("(")?(this._token.state="parameters",this.push({type:this.readParameters}),"punctuation"):this.matchComment()?"comment":this._textReader.match("{")?(this._token.state="block",this.push({type:this.readBlockStatement,delimiter:"}"}),"punctuation"):(this._textReader.read(),"error")},t.prototype.readParameters=function(){if(this._textReader.match(")"))return this.pop(),"punctuation";if(this._textReader.match(","))return"punctuation";if(this._textReader.skipWhitespaces()||this._textReader.skipLineTerminators())return"text";if(this.matchComment())return"comment";var t=this.readWord();return t.length>0?"declaration":(this._textReader.read(),"error")},t.prototype.readString=function(){return this._textReader.match("\\")?this._token.value+="\\"+this._textReader.read():this._textReader.match(this._token.value[0])?(this._token.value+=this._token.value[0],this.pop()):this._token.value+=this._textReader.read(),"literal"},t.prototype.readNumber=function(){var t=this._textReader.peek();return t>="0"&&t<="9"?(this._token.value+=this._textReader.read(),"literal"):"."==t&&this._token.comma&&"00"!==this._token.value?(this._token.comma=!1,this._token.value+=this._textReader.read(),"literal"):"E"===t||"e"===t?(this._token.comma=!1,this._token.value+=this._textReader.read(),t=this._textReader.peek(),"+"!==t&&"-"!==t||(this._token.value+=this._textReader.read()),"literal"):(this.pop(),null)},t.prototype.readHexNumber=function(){var t=this._textReader.peek();return t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F"?(this._token.value+=this._textReader.read(),"literal"):(this.pop(),null)},t.prototype.readVariable=function(){if(";"===this._textReader.peek())return this.pop(),null;if(this.matchComment())return"comment";if("none"===this._token.state)return this._textReader.skipLineTerminators()||this._textReader.skipWhitespaces()?"text":(this._token.state="name",this._token.name=this._textReader.read(),"declaration");if("name"===this._token.state)return this._textReader.skipLineTerminators()||this._textReader.skipWhitespaces()?(this._token.state="next","text"):","===this._textReader.peek()||"="===this._textReader.peek()?(this._token.state="next",null):(this._token.name+=this._textReader.read(),"declaration");if("next"===this._token.state){if(this._textReader.skipLineTerminators()||this._textReader.skipWhitespaces())return"text";if(this._textReader.match(","))return this.pop(),this.push({type:this.readVariable,state:"none",name:""}),"punctuation";if(this._textReader.match("="))return this._token.state="expression",this.push({type:this.readExpression,continuation:!0,regexp:!0}),"punctuation";if(this._textReader.match("in"))return this.pop(),"keyword"}else if("expression"===this._token.state){if(this._textReader.skipLineTerminators())return null;if(this._textReader.skipWhitespaces())return"text";if(","===this._textReader.peek())return this._token.state="next",null}return this.pop(),null},t.prototype.matchLiteral=function(){this._textReader.save();var t=this._textReader.read(),e=t;if("'"===t||'"'===t)return this.push({type:this.readString,value:e}),!0;var r=!0;return"-"===t&&(t=this._textReader.read(),e+=t),"0"===t&&"X"===this._textReader.peek().toUpperCase()?(e+=this._textReader.read(),this.push({type:this.readHexNumber,value:e,comma:!1}),!0):("."===t&&(t=this._textReader.read(),e+=t,r=!1),t>="0"&&t<="9"?(this.push({type:this.readNumber,value:e,comma:r}),!0):(this._textReader.restore(),!1))},t.prototype.matchRegExp=function(){if(this._textReader.save(),this._token.regexp&&this._textReader.match("/"))for(;this._textReader.peek().length>0&&!this._textReader.skipLineTerminators();)if(this._textReader.match("\\"))this._textReader.read();else if(this._textReader.match("[")){for(var t=!1;this._textReader.peek().length>0&&!this._textReader.skipLineTerminators();){if(this._textReader.match("]")){t=!0;break}this._textReader.match("\\"),this._textReader.read()}if(!t)break}else{if(this._textReader.match("/")){for(;this._textReader.peek().length>0&&this._regExpCommands.hasOwnProperty(this._textReader.peek());)this._textReader.read();return!0}this._textReader.read()}return this._textReader.restore(),!1},t.prototype.matchBlockExpression=function(){return this._textReader.match("{")?(this.push({type:this.readObject,identifier:!0}),!0):this._textReader.match("(")?(this.push({type:this.readArguments}),!0):!!this._textReader.match("[")&&(this.push({type:this.readArray}),!0)},t.prototype.matchComment=function(){return this._textReader.match("//")?(this.push({type:this.readLineComment}),!0):!!this._textReader.match("/*")&&(this.push({type:this.readBlockComment}),!0)},t.prototype.readWord=function(){for(var t,e="";(t=this._textReader.peek()).length>0&&/[\w\$_]/.test(t);)e+=t,this._textReader.read();return e},t.prototype.terminate=function(t){return this._textReader.match(t)?(this.pop(),!0):(this._textReader.read(),!1)},t.prototype.popToken=function(t){this._tokenStack.length>1&&this._tokenStack[this._tokenStack.length-1].type===t&&this.pop()},t.prototype.push=function(t){this._tokenStack.push(t)},t.prototype.pop=function(){this._tokenStack.pop()},t}();t.JavaScriptLanguage=e}(Textor||(Textor={}));
//# sourceMappingURL=javascript.js.map
